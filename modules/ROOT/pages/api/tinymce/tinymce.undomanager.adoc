= tinymce.UndoManager

This class handles the undo/redo history levels for the editor. Since the built-in undo/redo has major drawbacks a custom one was needed.

[#methods .anchor]##

== link:#methods[Methods]

[cols=",,",options="header",]
|===
|name |summary |defined by
|link:#add[add()] |Adds a new undo level/snapshot to the undo list. |link:/docs-4x/api/tinymce/tinymce.undomanager[tinymce.UndoManager]
|link:#beforechange[beforeChange()] |Stores away a bookmark to be used when performing an undo action so that the selection is before the change has been made. |link:/docs-4x/api/tinymce/tinymce.undomanager[tinymce.UndoManager]
|link:#clear[clear()] |Removes all undo levels. |link:/docs-4x/api/tinymce/tinymce.undomanager[tinymce.UndoManager]
|link:#extra[extra()] |Adds an extra "hidden" undo level by first applying the first mutation and store that to the undo stack then roll back that change and do the second mutation on top of the stack. This will produce an extra undo level that the user doesn't see until they undo. |link:/docs-4x/api/tinymce/tinymce.undomanager[tinymce.UndoManager]
|link:#hasredo[hasRedo()] |Returns true/false if the undo manager has any redo levels. |link:/docs-4x/api/tinymce/tinymce.undomanager[tinymce.UndoManager]
|link:#hasundo[hasUndo()] |Returns true/false if the undo manager has any undo levels. |link:/docs-4x/api/tinymce/tinymce.undomanager[tinymce.UndoManager]
|link:#ignore[ignore()] |Executes the specified mutator function as an undo transaction. But without adding an undo level. Any logic within the translation that adds undo levels will be ignored. So a translation can include calls to execCommand or editor.insertContent. |link:/docs-4x/api/tinymce/tinymce.undomanager[tinymce.UndoManager]
|link:#redo[redo()] |Redoes the last action. |link:/docs-4x/api/tinymce/tinymce.undomanager[tinymce.UndoManager]
|link:#transact[transact()] |Executes the specified mutator function as an undo transaction. The selection before the modification will be stored to the undo stack and if the DOM changes it will add a new undo level. Any logic within the translation that adds undo levels will be ignored. So a translation can include calls to execCommand or editor.insertContent. |link:/docs-4x/api/tinymce/tinymce.undomanager[tinymce.UndoManager]
|link:#undo[undo()] |Undoes the last action. |link:/docs-4x/api/tinymce/tinymce.undomanager[tinymce.UndoManager]
|===

== Methods

[#add .anchor]##

=== link:#add[add]

add(level:Object, event:DOMEvent):Object

Adds a new undo level/snapshot to the undo list.

==== Parameters

* [.param-name]#level# [.param-type]#(Object)# - Optional undo level object to add.
* [.param-name]#event# [.param-type]#(DOMEvent)# - Optional event responsible for the creation of the undo level.

==== Return value

* [.return-type]#Object# - Undo level that got added or null it a level wasn't needed.

[#beforechange .anchor]##

=== link:#beforechange[beforeChange]

beforeChange()

Stores away a bookmark to be used when performing an undo action so that the selection is before the change has been made.

[#clear .anchor]##

=== link:#clear[clear]

clear()

Removes all undo levels.

[#extra .anchor]##

=== link:#extra[extra]

extra(callback1:function, callback2:function)

Adds an extra "hidden" undo level by first applying the first mutation and store that to the undo stack then roll back that change and do the second mutation on top of the stack. This will produce an extra undo level that the user doesn't see until they undo.

==== Parameters

* [.param-name]#callback1# [.param-type]#(function)# - Function that does mutation but gets stored as a "hidden" extra undo level.
* [.param-name]#callback2# [.param-type]#(function)# - Function that does mutation but gets displayed to the user.

[#hasredo .anchor]##

=== link:#hasredo[hasRedo]

hasRedo():Boolean

Returns true/false if the undo manager has any redo levels.

==== Return value

* [.return-type]#Boolean# - true/false if the undo manager has any redo levels.

[#hasundo .anchor]##

=== link:#hasundo[hasUndo]

hasUndo():Boolean

Returns true/false if the undo manager has any undo levels.

==== Return value

* [.return-type]#Boolean# - true/false if the undo manager has any undo levels.

[#ignore .anchor]##

=== link:#ignore[ignore]

ignore(callback:function)

Executes the specified mutator function as an undo transaction. But without adding an undo level. Any logic within the translation that adds undo levels will be ignored. So a translation can include calls to execCommand or editor.insertContent.

==== Parameters

* [.param-name]#callback# [.param-type]#(function)# - Function that gets executed and has dom manipulation logic in it.

[#redo .anchor]##

=== link:#redo[redo]

redo():Object

Redoes the last action.

==== Return value

* [.return-type]#Object# - Redo level or null if no redo was performed.

[#transact .anchor]##

=== link:#transact[transact]

transact(callback:function):Object

Executes the specified mutator function as an undo transaction. The selection before the modification will be stored to the undo stack and if the DOM changes it will add a new undo level. Any logic within the translation that adds undo levels will be ignored. So a translation can include calls to execCommand or editor.insertContent.

==== Parameters

* [.param-name]#callback# [.param-type]#(function)# - Function that gets executed and has dom manipulation logic in it.

==== Return value

* [.return-type]#Object# - Undo level that got added or null it a level wasn't needed.

[#undo .anchor]##

=== link:#undo[undo]

undo():Object

Undoes the last action.

==== Return value

* [.return-type]#Object# - Undo level or null if no undo was performed.
